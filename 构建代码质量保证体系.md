构建代码质量保证体系

缺陷和代码质量：没有缺陷，质量不一定好；但是缺陷多，质量一定不好

团队规范 <= 代码规范 <= 开源规范

敬畏之心

- 规范 
- 工具 
- 可视化反馈
- code review
- 重构
- 外部



执行和细节

代码审查：Code Review

1. 【提议】增加频率：由现在的2，4变为1，3，5
2. 【提议】没有问题的MR不过夜



测试覆盖率：

1. 【提议】新增代码的中函数的测试覆盖率100%
2. 【提议】修改函数的测试覆盖率100%
3. 【提议】UI组件必须测试所有条件渲染和事件响应



TypeScript化：

1. 所有新增的js文件必须为ts或tsx
2. 【提议】所有修改的文件也必须转为ts或tsx 
3. 【提议】不允许有any类型
4. 【提议】规范：https://ths.js.org/2020/05/24/TypeScript%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/



工具：

1. sonarlint 集成：https://www.sonarlint.org/vscode
2. Iceworks vscode 插件



Lint：

1. 【提议】新增文件没有warnings
2. 【提议】修改的文件没有warnings
3. 【提议】解决现有ESLint问题数（50个 / 人 / 周）
4. 【提议】解决现有StyleLint的问题数（1个 / 人 / 周）



MR标准：

1. 自测通过
2. 提供解决方案思路
3. 最终结果提供截图/视频



提测标准：

1. 自测通过
2. 【提议】Code Review通过（Resolve所有问题）
3. 【提议】Sonar上对应的分支上没有任何新增的问题（包括bug，code smell）
4. 【提议】标记处影响范围
5. 【提议】提供给测试流水线和sonar结果



工作方式：

1. 【提议】所有功能实现/缺陷修复必须至少两人结对完成
2. 【提议】结对严格按照Driver 和 Navigator 模式
3. 模式：https://insights.thoughtworks.cn/pair-programming/
4. 【提议】每天必须提交代码



代码：

1. 【提议】函数体不得超过30行，加入lint规则



测试参与提测规则的制定

1. 不符合规则直接打回



重构：

1. 现有代码
2. 模块化（划分为小项目）



指标：

1. 技术债
2. 过程缺陷数
3. 线上缺陷数